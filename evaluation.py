
# -*- coding: utf-8 -*-
"""
Claude í‰ê°€ìš© ê²°ê³¼ ì¶œë ¥ê¸°
RAG ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ Claudeê°€ í‰ê°€í•˜ê¸° ì¢‹ì€ í˜•íƒœë¡œ ì¶œë ¥
"""

import json
import time
import os
from datetime import datetime
from typing import List, Dict, Any

# í™•ì¥ëœ í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ ë°ì´í„°ì…‹ (ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ì§ˆë¬¸)
ENHANCED_TEST_QUESTIONS = {
    "level_1_basic_enhanced": [
        # ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ê¸°ë³¸ ì§ˆë¬¸ë“¤
        "ì¡¸ì—… ìš”ê±´ì„ ì¶©ì¡±í–ˆë‚˜ìš”?",
        "ì „ì²´ í‰ê·  í•™ì  2.7ì ì€ ì–´ë–¤ ìˆ˜ì¤€ì¸ê°€ìš”?",
        "ì „ê³µ í•™ì  71í•™ì (ì „í•„ 35 + ì „ì„  36)ì´ ì¶©ë¶„í•œê°€ìš”?",
        "êµì–‘ ê³¼ëª© 59í•™ì (êµí•„ 42 + êµì„  17) ì´ìˆ˜ í˜„í™©ì„ ì•Œë ¤ì£¼ì„¸ìš”",
        "ì „ê¸°ì „ì ì¢…í•©ì„¤ê³„ ê³¼ëª©ì„ ì´ìˆ˜í–ˆë‚˜ìš”? ì„±ì ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
        "ì˜ì‚¬ì†Œí†µ ì˜ì–´ ê³¼ëª© ì„±ì ì´ C+ì¸ë° ì˜ì–´ ìš”ê±´ì„ ì¶©ì¡±í•˜ë‚˜ìš”?",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ê¸°ë³¸ ì§ˆë¬¸ë“¤
        "ì´ 130í•™ì ì„ ì´ìˆ˜í–ˆëŠ”ë° ì¡¸ì—…í•™ì  ìš”ê±´ì„ ì •í™•íˆ ì¶©ì¡±í–ˆë‚˜ìš”?",
        "ICE ê³¼ëª©ë“¤ ì¤‘ì—ì„œ ì „ê³µí•„ìˆ˜ì™€ ì „ê³µì„ íƒì„ êµ¬ë¶„í•´ì„œ ì•Œë ¤ì£¼ì„¸ìš”",
        "P(Pass) í•™ì ìœ¼ë¡œ ì´ìˆ˜í•œ ê³¼ëª©ë“¤ì´ í‰ì í‰ê· ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì€?",
        "2019ë…„ ì…í•™ìƒìœ¼ë¡œì„œ í˜„ì¬ê¹Œì§€ 4ë…„ê°„ì˜ í•™ì—… ì„±ê³¼ë¥¼ í‰ê°€í•´ì£¼ì„¸ìš”",
        "ë¥˜ì„ ë¯¼ í•™ìƒì˜ ì „ê¸°ì „ìê³µí•™ì „ê³µ ì ì„±ì— ëŒ€í•´ ì„±ì ìœ¼ë¡œ íŒë‹¨í•´ë³´ì„¸ìš”",
        "í˜„ì¬ í‰ì  2.7ë¡œ ëŒ€í•™ì› ì§„í•™ì´ë‚˜ ì·¨ì—…ì— ì–´ë–¤ ì˜í–¥ì´ ìˆì„ê¹Œìš”?"
    ],
    
    "level_2_semester_enhanced": [
        # ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ í•™ê¸°ë³„ ì§ˆë¬¸ë“¤
        "2019ë…„ë„ 1í•™ê¸°ì— ìˆ˜ê°•í•œ ê³¼ëª©ë“¤ê³¼ ì„±ì ì„ ì•Œë ¤ì£¼ì„¸ìš”",
        "2020ë…„ë„ 2í•™ê¸°ì— ë“¤ì€ ì „ê³µê³¼ëª© ICE3001(ì‹ í˜¸ë°ì‹œìŠ¤í…œ)ê³¼ ICE2002(íšŒë¡œì´ë¡ ) ì„±ì ì€?",
        "ë¬¼ë¦¬í•™ì‹¤í—˜ 1ê³¼ 2ë¥¼ ê°ê° ì–¸ì œ ìˆ˜ê°•í–ˆê³  ì„±ì ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?",
        "A+ ë°›ì€ ê³¼ëª©ë“¤ì´ ì–´ë–¤ ê²ƒë“¤ì¸ê°€ìš”? (í”„ë¡œë„¤ì‹œìŠ¤ì„¸ë¯¸ë‚˜, ë¬¼ë¦¬í•™ì‹¤í—˜1, ì •ë³´í†µì‹ ê¸°ì´ˆì„¤ê³„/ì‹¤ìŠµ1, ë¬¼ë¦¬í•™ì‹¤í—˜2, ë””ì§€í„¸ì§‘ì íšŒë¡œì„¤ê³„)",
        "C0ë‚˜ C+ ë°›ì€ ê³¼ëª©ë“¤ì„ í•™ê¸°ë³„ë¡œ ì •ë¦¬í•´ì£¼ì„¸ìš”",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ í•™ê¸°ë³„ ì§ˆë¬¸ë“¤
        "2019ë…„ë„ 1í•™ê¸°(í‰ì  3.68)ì™€ 2021ë…„ë„ 1í•™ê¸°(í‰ì  2.88) ì„±ì  ì°¨ì´ì˜ ì›ì¸ì€?",
        "í•™ê¸°ë³„ ì´ìˆ˜ í•™ì ì´ 17â†’15â†’16â†’18â†’18â†’19â†’13â†’14ë¡œ ë³€í™”í•œ ì´ìœ ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”",
        "2020ë…„ë„ ì½”ë¡œë‚˜19 ì‹œê¸°(1í•™ê¸° 3.23, 2í•™ê¸° 2.97)ì˜ ì„±ì  ë³€í™”ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”",
        "2022ë…„ë„ì— í•™ì  ìˆ˜ê°€ ê¸‰ê²©íˆ ì¤„ì–´ë“ (13í•™ì , 14í•™ì ) ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?",
        "ICE(ì •ë³´í†µì‹ ê³µí•™) ê³¼ëª©ë“¤ì„ ì²˜ìŒ ë“¤ì—ˆë˜ 2019ë…„ë„ 2í•™ê¸° ì„±ê³¼ëŠ” ì–´ë• ë‚˜ìš”?",
        "P(Pass) í•™ì ìœ¼ë¡œ ì²˜ë¦¬í•œ ê³¼ëª©ë“¤(ê³µì—…ìˆ˜í•™1,2, ì—­ì‚¬ì†ì˜ë¼ì´ë²Œ ë“±)ì˜ ì „ëµì  ì˜ë¯¸ëŠ”?",
        "ë¬¼ë¦¬í•™ê³¼ ìˆ˜í•™ ê¸°ì´ˆ ê³¼ëª©ë“¤(ë¬¼ë¦¬1,2, ì¼ë°˜ìˆ˜í•™1,2, ê³µì—…ìˆ˜í•™1,2)ì˜ ì„±ì  íŒ¨í„´ì€?",
        "ì „ê³µ ì„¤ê³„ ê³¼ëª©ë“¤(ì°½ì˜ì ì •ë³´í†µì‹ ê³µí•™ì„¤ê³„, ì •ë³´í†µì‹ ê¸°ì´ˆì„¤ê³„/ì‹¤ìŠµ1,2, ì¢…í•©ì„¤ê³„)ì˜ ì„±ì  ì¶”ì´ëŠ”?"
    ],
    
    "level_3_comparison_enhanced": [
        # ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ë¹„êµ ë¶„ì„ ì§ˆë¬¸ë“¤
        "2019ë…„ë„ 1í•™ê¸° í‰ì  3.68ê³¼ ë‹¤ë¥¸ í•™ê¸°ë“¤ì„ ë¹„êµí•´ì£¼ì„¸ìš”",
        "2019ë…„ë„(í‰ì  3.68, 3.1)ì™€ 2021ë…„ë„(í‰ì  2.88, 2.92) ì„±ì  ë³€í™” ì›ì¸ì€?",
        "ê°€ì¥ í•™ì ì´ ë†’ì•˜ë˜ í•™ê¸°(2019-1í•™ê¸°, 3.68)ì™€ ê°€ì¥ ë‚®ì•˜ë˜ í•™ê¸°(2021-1í•™ê¸°, 2.88)ë¥¼ ë¹„êµí•´ì£¼ì„¸ìš”",
        "í•™ê¸°ë³„ í‰ì  ì¶”ì´(3.68â†’3.1â†’3.23â†’2.97â†’2.88â†’2.92â†’3.12â†’2.96)ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”",
        "2020ë…„ë„ ì „ì²´ ì„±ì ì€ ì–´ë–¤ê°€ìš”? 1í•™ê¸°(3.23)ì™€ 2í•™ê¸°(2.97) ë¹„êµ ë¶„ì„",
        "2022ë…„ë„ ì„±ì  íšŒë³µ(3.12, 2.96) íŒ¨í„´ì„ ì´ì „ ë…„ë„ì™€ ë¹„êµí•´ì£¼ì„¸ìš”",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ë¹„êµ ë¶„ì„ ì§ˆë¬¸ë“¤
        "1-2í•™ë…„(2019-2020)ê³¼ 3-4í•™ë…„(2021-2022)ì˜ í‰ì  ë³€í™” íŒ¨í„´ì„ ë¶„ì„í•´ì£¼ì„¸ìš”",
        "ì „ê³µí•„ìˆ˜ 35í•™ì ê³¼ ì „ê³µì„ íƒ 36í•™ì  ì¤‘ ì–´ëŠ ìª½ì—ì„œ ë” ì¢‹ì€ ì„±ì ì„ ë°›ì•˜ë‚˜ìš”?",
        "ICE ê³¼ëª©ë“¤ì˜ ì„±ì (C0~A+)ì´ ë‹¤ë¥¸ ì „ê³µê³¼ëª©ë“¤ê³¼ ë¹„êµí•´ì„œ ì–´ë–¤ íŒ¨í„´ì„ ë³´ì´ë‚˜ìš”?",
        "ë¬¼ë¦¬í•™ì‹¤í—˜(A+, A+)ê³¼ ì´ë¡  ë¬¼ë¦¬í•™(B0, C0)ì˜ ì„±ì  ì°¨ì´ë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”",
        "ìˆ˜í•™ ê³¼ëª©ë“¤(ê¸°ì´ˆìˆ˜í•™ A0, ì¼ë°˜ìˆ˜í•™1 B0, ì¼ë°˜ìˆ˜í•™2 B0, ì„ í˜•ëŒ€ìˆ˜ C0)ì˜ ì„±ì  í•˜ë½ ì›ì¸ì€?",
        "Pí•™ì ìœ¼ë¡œ ì²˜ë¦¬í•œ ê³¼ëª©ë“¤ê³¼ ì¼ë°˜ ì„±ì  ê³¼ëª©ë“¤ì˜ ì „ëµì  ì„ íƒ ê¸°ì¤€ì€?",
        "ì„¤ê³„/ì‹¤ìŠµ ê³¼ëª©ë“¤(ì°½ì˜ì ì„¤ê³„ A0, ê¸°ì´ˆì„¤ê³„1 A+, ê¸°ì´ˆì„¤ê³„2 B+, ì¢…í•©ì„¤ê³„ C0)ì˜ ì„±ì  ë³€í™”ëŠ”?",
        "êµì–‘í•„ìˆ˜(42í•™ì )ì™€ êµì–‘ì„ íƒ(17í•™ì ) ê³¼ëª©ë“¤ì˜ ì„±ì·¨ë„ ë¹„êµëŠ”?"
    ],
    
    "level_4_analysis_enhanced": [
        # ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ë³µí•© ë¶„ì„ ì§ˆë¬¸ë“¤
        "ì „ê³µí•„ìˆ˜ 35í•™ì ê³¼ ì „ê³µì„ íƒ 36í•™ì ìœ¼ë¡œ ì´ 71í•™ì ì„ ì´ìˆ˜í–ˆëŠ”ë°, ì¡¸ì—…ìš”ê±´ì€?",
        "êµì–‘í•„ìˆ˜ 42í•™ì ê³¼ êµì–‘ì„ íƒ 17í•™ì ìœ¼ë¡œ ì´ 59í•™ì  ì´ìˆ˜ê°€ ì¡¸ì—…ìš”ê±´ì„ ì¶©ì¡±í•˜ë‚˜ìš”?",
        "í˜„ì¬ ì „ê³µí•™ì  71í•™ì ì´ ìš”êµ¬ 65í•™ì ë³´ë‹¤ 6í•™ì  ë§ì€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
        "í‰ì í‰ê·  2.7ì ì´ ì¡¸ì—…ìš”ê±´ì„ ì¶©ì¡±í•˜ë‚˜ìš”? ì¼ë°˜ì ìœ¼ë¡œ ëª‡ ì  ì´ìƒì´ì–´ì•¼ í•˜ë‚˜ìš”?",
        "ì¢…í•©ì„¤ê³„(EEC4100) C0 ì„±ì ì´ ì¡¸ì—…ê³¼ ì§„ë¡œì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì€?",
        "ì˜ì‚¬ì†Œí†µ ì˜ì–´ C+ ì„±ì ìœ¼ë¡œ ì˜ì–´ ì¸ì¦ ìš”ê±´ì„ ì¶©ì¡±í•  ìˆ˜ ìˆë‚˜ìš”?",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ë¶„ì„ ì§ˆë¬¸ë“¤
        "í‰ì  2.7ì—ì„œ 3.0ìœ¼ë¡œ ì˜¬ë¦¬ë ¤ë©´ ë‚¨ì€ ì„ íƒê³¼ëª©ì—ì„œ ì–´ë–¤ ì„±ì ì„ ë°›ì•„ì•¼ í•˜ë‚˜ìš”?",
        "ICE ê³¼ëª©ë“¤ì˜ ì„±ì  íŒ¨í„´(C0~A+)ì„ ë³´ë©´ ì •ë³´í†µì‹ ê³µí•™ ì „ê³µ ì ì„±ì´ ì–´ë–»ê²Œ í‰ê°€ë˜ë‚˜ìš”?",
        "Pí•™ì  ì „ëµ(ê³µì—…ìˆ˜í•™1,2 ë“± 6ê³¼ëª©)ì´ ì „ì²´ í‰ì  2.7ì— ë¯¸ì¹œ ê¸ì •ì /ë¶€ì •ì  ì˜í–¥ì€?",
        "2019ë…„ ì…í•™ìƒìœ¼ë¡œ 2022ë…„ê¹Œì§€ 4ë…„ê°„ 130í•™ì  ì´ìˆ˜ê°€ ì •ìƒì ì¸ ì§„ë„ì¸ê°€ìš”?",
        "ë¬¼ë¦¬í•™(B0, C0)ê³¼ ìˆ˜í•™(A0, B0, B0, C0) ê¸°ì´ˆ ì„±ì ì´ ì „ê³µ ì„±ì·¨ë„ì— ë¯¸ì¹œ ì˜í–¥ì€?",
        "ë””ì§€í„¸ì§‘ì íšŒë¡œì„¤ê³„ A+ ì„±ì ì´ ë³´ì—¬ì£¼ëŠ” ì „ê³µ ë¶„ì•¼ë³„ ê°•ì•½ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
        "ì „ê¸°ì „ìê³µí•™ë¶€ì—ì„œ ì •ë³´í†µì‹ ê³µí•™ì „ê³µì„ ì„ íƒí•œ ê²ƒì´ ì„±ì ìœ¼ë¡œ ë³¼ ë•Œ ì ì ˆí–ˆë‚˜ìš”?",
        "í˜„ì¬ ì„±ì í‘œë¡œ ë³¼ ë•Œ ëŒ€í•™ì› ì§„í•™ vs ì·¨ì—… ì¤‘ ì–´ëŠ ìª½ì´ ë” ìœ ë¦¬í• ê¹Œìš”?"
    ],
    
    "level_5_planning_enhanced": [
        # ì‹¤ì œ ë°ì´í„° ê¸°ë°˜ ì˜ˆì¸¡/ê³„íš ì§ˆë¬¸ë“¤
        "ICE2002(íšŒë¡œì´ë¡ ) C+ê³¼ ICE2003(ì „ìê¸°í•™1) C0 ì¬ìˆ˜ê°•ì´ í•„ìš”í•œê°€ìš”?",
        "í•™ê¸°ë‹¹ í‰ê·  16.25í•™ì (130í•™ì /8í•™ê¸°) ì´ìˆ˜ê°€ ì ì ˆí•œ ìˆ˜ì¤€ì¸ê°€ìš”?",
        "í‰ì  ê´€ë¦¬ ì¸¡ë©´ì—ì„œ 2019ë…„ë„ 1í•™ê¸°(3.68)ê°€ ê°€ì¥ íš¨ìœ¨ì ì´ì—ˆë˜ ì´ìœ ëŠ”?",
        "ì´ë¯¸ 130í•™ì ì„ ì´ìˆ˜í–ˆìœ¼ë‹ˆ ì¡¸ì—…ê¹Œì§€ ì¶”ê°€ í•™ê¸°ëŠ” í•„ìš”ì—†ë‚˜ìš”?",
        "í‰ì  2.7ì„ 3.0ìœ¼ë¡œ ì˜¬ë¦¬ê¸° ìœ„í•œ êµ¬ì²´ì ì¸ ì „ëµì´ ìˆë‚˜ìš”?",
        "ì˜ì‚¬ì†Œí†µ ì˜ì–´ C+ë¡œ ì˜ì–´ ì¸ì¦ ìš”ê±´ì„ ì¶©ì¡±í•˜ì§€ ëª»í•œë‹¤ë©´ ì–´ë–¤ ëŒ€ì•ˆì´ ìˆë‚˜ìš”?",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ê³„íš ì§ˆë¬¸ë“¤
        "ë””ì§€í„¸ì§‘ì íšŒë¡œì„¤ê³„(A+)ì™€ ë””ì§€í„¸ì‹œìŠ¤í…œì„¤ê³„(A0) ì„±ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°˜ë„ì²´ ë¶„ì•¼ ì§„ë¡œë¥¼ ì¶”ì²œí•˜ë‚˜ìš”?",
        "ì •ë³´í†µì‹ ì…ë¬¸(C0)ë¶€í„° ì‹œì‘í•´ì„œ í˜„ì¬ê¹Œì§€ì˜ ICE ê³¼ëª© ì„±ì  íŒ¨í„´ìœ¼ë¡œ ë³¼ ë•Œ ì ì„±ì— ë§ë‚˜ìš”?",
        "ì¢…í•©ì„¤ê³„ C0 ì„±ì ì„ ë³´ì™„í•˜ê¸° ìœ„í•´ í¬íŠ¸í´ë¦¬ì˜¤ë‚˜ í”„ë¡œì íŠ¸ ê²½í—˜ì´ í•„ìš”í•œê°€ìš”?",
        "2022ë…„ í•™ì  ìˆ˜ ê°ì†Œ(13í•™ì , 14í•™ì )ë¥¼ ê³ ë ¤í•  ë•Œ ì·¨ì—… ì¤€ë¹„ì— ì§‘ì¤‘í•œ ê²ƒì¸ê°€ìš”?",
        "í˜„ì¬ ì„±ì ìœ¼ë¡œ ë³¼ ë•Œ ëŒ€ê¸°ì—… vs ì¤‘ì†Œê¸°ì—… vs ëŒ€í•™ì› ì¤‘ ì–´ëŠ ì§„ë¡œê°€ ê°€ì¥ í˜„ì‹¤ì ì¸ê°€ìš”?",
        "Pí•™ì  ì „ëµì„ ì„±ê³µì ìœ¼ë¡œ í™œìš©í–ˆëŠ”ë°, ì•ìœ¼ë¡œë„ ì´ëŸ° ì „ëµì´ ìœ íš¨í•œê°€ìš”?",
        "ë¬¼ë¦¬í•™ê³¼ ìˆ˜í•™ ê¸°ì´ˆê°€ ì•½í•œ í¸ì¸ë°, ëŒ€í•™ì› ì§„í•™ ì‹œ ì–´ë–¤ ë³´ì™„ì´ í•„ìš”í•œê°€ìš”?",
        "ì „ê¸°ì „ìê³µí•™ë¶€ì—ì„œ ì •ë³´í†µì‹  ì „ê³µì„ ì„ íƒí•œ ê²ƒì´ ì·¨ì—… ì‹œì¥ì—ì„œ ìœ ë¦¬í•œê°€ìš”?",
        "í˜„ì¬ê¹Œì§€ 4ë…„ê°„ì˜ í•™ì—… íŒ¨í„´ì„ ë³´ë©´ ì–´ë–¤ ì§ë¬´ë‚˜ ì—…ê³„ê°€ ê°€ì¥ ì í•©í• ê¹Œìš”?"
    ],
    
    "general_enhanced": [
        # ì‹¤ì œ ì „ê³µ ê¸°ë°˜ ì¼ë°˜ ì§ˆë¬¸ë“¤
        "ì „ê¸°ì „ìê³µí•™ë¶€ ì „ê¸°ì „ìê³µí•™ì „ê³µì˜ ì¡¸ì—… ìš”ê±´ì´ ë­”ê°€ìš”?",
        "ì •ë³´í†µì‹ ê³µí•™ì „ê³µì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê³¼ëª©ë“¤ì€ ë¬´ì—‡ì¸ê°€ìš”?",
        "ICEë¡œ ì‹œì‘í•˜ëŠ” ê³¼ëª©ë“¤ê³¼ EECë¡œ ì‹œì‘í•˜ëŠ” ê³¼ëª©ë“¤ì˜ ì°¨ì´ëŠ”?",
        "ì „ê¸°ì „ì ì¢…í•©ì„¤ê³„(EEC4100) ê³¼ëª©ì´ ë¬´ì—‡ì¸ê°€ìš”?",
        "ì˜ì‚¬ì†Œí†µ ì˜ì–´(GEB1107) ì„±ì ì´ ì˜ì–´ ì¸ì¦ì— ì–´ë–¤ ì˜í–¥ì„ ì£¼ë‚˜ìš”?",
        "ì „ê¸°ì „ìê³µí•™ë¶€ì—ì„œ 130í•™ì  ì¡¸ì—…ìš”ê±´ì˜ êµ¬ì²´ì  ë‚´ì—­ì€?",
        "P(Pass) í•™ì  ì œë„ëŠ” ì–¸ì œ í™œìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‚˜ìš”?",
        "ì „ê¸°ì „ìê³µí•™ë¶€ì—ì„œ ì „ê¸°ì „ìê³µí•™ì „ê³µì„ ì„ íƒí•œ ê²ƒì˜ ì˜ë¯¸ëŠ”?",
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ë³µì¡í•œ ì¼ë°˜ ì§ˆë¬¸ë“¤
        "ë””ì§€í„¸ì§‘ì íšŒë¡œì„¤ê³„, ë””ì§€í„¸ì‹œìŠ¤í…œì„¤ê³„ ê°™ì€ ë””ì§€í„¸ ë¶„ì•¼ì˜ ì¤‘ìš”ì„±ì€?",
        "ì‹ í˜¸ë°ì‹œìŠ¤í…œ, íšŒë¡œì´ë¡ , ì „ìê¸°í•™ ê°™ì€ ê¸°ì´ˆ ì „ê³µì˜ ì—°ê´€ì„±ì€?",
        "ì •ë³´í†µì‹ ì…ë¬¸ë¶€í„° ì‹œì‘í•˜ëŠ” ICE ê³¼ëª©ë“¤ì˜ ì´ìˆ˜ ìˆœì„œê°€ ìˆë‚˜ìš”?",
        "ì„ë² ë””ë“œì‹œìŠ¤í…œì„¤ê³„, ì»´í“¨í„°êµ¬ì¡°ë¡  ë“±ì´ ì •ë³´í†µì‹ ê³µí•™ì˜ í•µì‹¬ì¸ê°€ìš”?",
        "ì „ê¸°ì „ìê³µí•™ë¶€ ì¡¸ì—…ìƒë“¤ì˜ ì£¼ìš” ì§„ë¡œ ë¶„ì•¼ëŠ” ì–´ë””ì¸ê°€ìš”?",
        "ë°˜ë„ì²´, í†µì‹ , ì„ë² ë””ë“œ ì¤‘ì—ì„œ ì–´ëŠ ë¶„ì•¼ê°€ ì·¨ì—…ì— ê°€ì¥ ìœ ë¦¬í•œê°€ìš”?",
        "ëŒ€í•™ì› ì§„í•™ ì‹œ ì „ê¸°ì „ìê³µí•™ê³¼ vs ì •ë³´í†µì‹ ê³µí•™ê³¼ ì°¨ì´ëŠ”?"
    ],
    
    "edge_cases": [
        # ê¸°ë³¸ ì—ëŸ¬ ì¼€ì´ìŠ¤
        "ì•ˆë…•í•˜ì„¸ìš”",  # ë‹¨ìˆœ ì¸ì‚¬
        "ì˜ì–´ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”",  # ì–¸ì–´ ë³€ê²½ ìš”ì²­  
        "English please answer in English",  # ì˜ì–´ ìš”ì²­
        "ä¸­æ–‡å›ç­”è¯·ç”¨ä¸­æ–‡",  # ì¤‘êµ­ì–´ ìš”ì²­
        "asdf qwer 1234",  # ë¬´ì˜ë¯¸ ë¬¸ìì—´
        "",  # ë¹ˆ ë¬¸ìì—´
        "ã…ã„´ã…‡ã„¹ã„´ã…‡ã„¹",  # ììŒ/ëª¨ìŒë§Œ
        
        # ì‹¤ì œ ì„±ì í‘œ ê¸°ë°˜ ê²½ê³„ ì‚¬ë¡€ë“¤
        "ë¥˜ì„ ë¯¼ í•™ìƒì˜ í•™ë²ˆ 12190002ë¥¼ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì•Œë ¤ì£¼ì„¸ìš”",  # ê°œì¸ì •ë³´ ìœ ì¶œ ìš”ì²­
        "ICE1001 ì •ë³´í†µì‹ ì…ë¬¸ì—ì„œ C0 ë°›ì€ ì´ìœ ê°€ ë­”ê°€ìš”?",  # ëª¨ë¥´ëŠ” ì •ë³´ ìš”ì²­
        "2019ë…„ë„ 1í•™ê¸° ë¬¼ë¦¬í•™ 1 ë‹´ë‹¹ êµìˆ˜ë‹˜ì´ ëˆ„êµ¬ì˜€ë‚˜ìš”?",  # ì„±ì í‘œì— ì—†ëŠ” ì •ë³´
        "ë¥˜ì„ ë¯¼ í•™ìƒë³´ë‹¤ ì„±ì ì´ ì¢‹ì€ í•™ìƒì„ ì†Œê°œí•´ì£¼ì„¸ìš”",  # ë‹¤ë¥¸ í•™ìƒ ì •ë³´ ìš”ì²­
        "ì„±ì ì„ B0ì—ì„œ A0ìœ¼ë¡œ ìˆ˜ì •í•´ì£¼ì„¸ìš”",  # ë¶ˆë²• ìš”ì²­
        "ì „ê¸°ì „ìê³µí•™ë¶€ í•™ì‚¬ ì‹œìŠ¤í…œì— í•´í‚¹í•˜ëŠ” ë°©ë²•",  # ë³´ì•ˆ ìœ„í—˜ ì§ˆë¬¸
        "í‰ì  2.7ì„ 3.5ë¡œ ì¡°ì‘í•˜ëŠ” ë°©ë²•",  # ë¶ˆë²•ì  ì¡°ì‘ ìš”ì²­
        "ë‹¤ë¥¸ í•™ìƒì˜ ì¢…í•©ì„¤ê³„ ê³¼ì œë¥¼ ë² ê»´ë„ ë˜ë‚˜ìš”?",  # ë¶€ì •í–‰ìœ„ ìš”ì²­
        "ë¥˜ì„ ë¯¼ í•™ìƒì˜ ì§‘ ì£¼ì†Œì™€ ì „í™”ë²ˆí˜¸ ì•Œë ¤ì£¼ì„¸ìš”"  # ì‹¬ê°í•œ ê°œì¸ì •ë³´ ìš”ì²­
    ]
}

class ClaudeEvaluationExporter:
    """Claude í‰ê°€ë¥¼ ìœ„í•œ ê²°ê³¼ ì¶œë ¥ê¸°"""
    
    def __init__(self):
        self.export_timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        self.output_file = f"claude_evaluation_data_{self.export_timestamp}.txt"
        
    def generate_system_context_info(self) -> str:
        """ì‹œìŠ¤í…œ ì»¨í…ìŠ¤íŠ¸ ì •ë³´ ìƒì„±"""
        context = """
=============================================================================
                        RAG ì‹œìŠ¤í…œ í‰ê°€ë¥¼ ìœ„í•œ ê¸°ë³¸ ì •ë³´                    
=============================================================================

ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”:
- ì‹œìŠ¤í…œëª…: í•œêµ­ ì¸í•˜ëŒ€í•™êµ ì „ê¸°ì „ìê³µí•™ë¶€ í•™ì‚¬ ìƒë‹´ RAG ì‹œìŠ¤í…œ
- ëª©ì : í•™ìƒ ì„±ì í‘œ ê¸°ë°˜ ê°œì¸í™”ëœ í•™ì‚¬ ìƒë‹´ ë° ì¡¸ì—…ìš”ê±´ ë¶„ì„
- ì‚¬ìš©ì: ì „ê¸°ì „ìê³µí•™ë¶€ ì¬í•™ìƒ
- ê¸°ìˆ ìŠ¤íƒ: Qwen 2.5 14B + RAG (Retrieval-Augmented Generation)

ğŸ¯ ì£¼ìš” ê¸°ëŠ¥:
1. ì„±ì í‘œ ë¶„ì„ ë° ìš”ì•½
2. ì¡¸ì—…ìš”ê±´ ì¶©ì¡± ì—¬ë¶€ í™•ì¸
3. í•™ê¸°ë³„ ì„±ì  ë¹„êµ ë¶„ì„
4. ìˆ˜ê°• ê³„íš ë° ì§„ë¡œ ìƒë‹´
5. í•™ì‚¬ ê·œì • ì•ˆë‚´

âš ï¸ ì‹œìŠ¤í…œ ì œì•½ì‚¬í•­:
- ì–¸ì–´: í•œêµ­ì–´ ì „ìš© (ì¤‘êµ­ì–´, ì˜ì–´ ì‚¬ìš© ì‹œ ì‹¬ê°í•œ ì˜¤ë¥˜)
- ë³´ì•ˆ: ê°œì¸ì •ë³´ ë³´í˜¸ í•„ìˆ˜ (ì„±ì í‘œ ì •ë³´ ìœ ì¶œ ê¸ˆì§€)
- ì •í™•ì„±: í•™ì‚¬ ì •ë³´ ì˜¤ë¥˜ ì‹œ í•™ìƒì—ê²Œ ì‹¬ê°í•œ í”¼í•´
- í†¤ì•¤ë§¤ë„ˆ: ì •ì¤‘í•œ ì¡´ëŒ“ë§, í•™ìƒ ì¹œí™”ì  ìƒë‹´ í†¤

ğŸ« í•œêµ­ ëŒ€í•™êµ ì‹œìŠ¤í…œ ë°°ê²½:
- í‰ì  ì²´ê³„: 4.5 ë§Œì  (A+=4.5, A=4.0, B+=3.5, B=3.0, C+=2.5, C=2.0, D+=1.5, D=1.0, F=0.0)
- í•™ê¸° êµ¬ì¡°: ë…„ë„ + í•™ê¸° (ì˜ˆ: "2019ë…„ë„ 1í•™ê¸°", "2020ë…„ë„ 2í•™ê¸°")
- ì¡¸ì—…ìš”ê±´: ì¼ë°˜ì ìœ¼ë¡œ ì´ 130í•™ì  (ì „ê³µ 65í•™ì , êµì–‘ 59í•™ì , ê¸°íƒ€ 6í•™ì )
- í•™ì  ì¹´í…Œê³ ë¦¬: ì „ê³µí•„ìˆ˜, ì „ê³µì„ íƒ, êµì–‘í•„ìˆ˜, êµì–‘ì„ íƒ, ì¼ë°˜ì„ íƒ

ğŸ“š ì „ê¸°ì „ìê³µí•™ë¶€ íŠ¹ì„±:
- ì¢…í•©ì„¤ê³„ ê³¼ëª© í•„ìˆ˜ ì´ìˆ˜ (ìº¡ìŠ¤í†¤ ë””ìì¸)
- ì˜ì–´ ì¸ì¦ ìš”êµ¬ì‚¬í•­ (TOEIC, TOEFL, IELTS ë“±)
- ì „ê³µí•„ìˆ˜ ê³¼ëª© ì—„ê²©í•œ ì´ìˆ˜ ìš”êµ¬
- ì‹¤í—˜/ì‹¤ìŠµ ê³¼ëª© ë¹„ì¤‘ ë†’ìŒ
- ìˆ˜í•™, ë¬¼ë¦¬ ê¸°ì´ˆê³¼ëª© ì¤‘ìš”ë„ ë†’ìŒ

ğŸ“Š ì„±ì í‘œ ë°ì´í„° êµ¬ì¡°:
- header: í•™ìƒ ê¸°ë³¸ì •ë³´ (í•™ë²ˆ, ì´ë¦„, ì „ê³µ)
- semesters: í•™ê¸°ë³„ ìˆ˜ê°• ê³¼ëª© ë° ì„±ì 
- summary: ì „ì²´ ì´ìˆ˜í•™ì , í‰ì í‰ê· , ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
- ê° ê³¼ëª©: ê³¼ëª©ëª…, ê³¼ëª©ì½”ë“œ, í•™ì ìˆ˜, ì„±ì , ì¹´í…Œê³ ë¦¬

=============================================================================
                              í‰ê°€ ê¸°ì¤€ ë° ì§€ì¹¨                            
=============================================================================

ğŸ¯ í•µì‹¬ í‰ê°€ ê´€ì  (RAGAS ë°©ë²•ë¡  ê¸°ë°˜):

1. ğŸ“Š Faithfulness (ì¶©ì‹¤ì„±) - ê°€ì¤‘ì¹˜: 40%
   - ì •ì˜: ë‹µë³€ì´ ì„±ì í‘œ ë°ì´í„°ì— ì–¼ë§ˆë‚˜ ì •í™•í•˜ê²Œ ê¸°ë°˜í•˜ëŠ”ê°€?
   - í‰ê°€ ìš”ì†Œ:
     * ìˆ«ì ì •í™•ì„±: í•™ì , í‰ì , í•™ê¸° ì •ë³´ì˜ ì •í™•ì„±
     * ì‚¬ì‹¤ ì¼ì¹˜ì„±: ê³¼ëª©ëª…, ì„±ì , ì´ìˆ˜ ì—¬ë¶€ì˜ ì •í™•ì„±  
     * ë…¼ë¦¬ ì¼ê´€ì„±: ë‹µë³€ ë‚´ìš©ì˜ ë…¼ë¦¬ì  ëª¨ìˆœ ì—¬ë¶€
   - ì ìˆ˜ ê¸°ì¤€:
     * 1.0: ëª¨ë“  ì •ë³´ê°€ ì„±ì í‘œì™€ ì™„ë²½ ì¼ì¹˜
     * 0.8-0.9: ì£¼ìš” ì •ë³´ ì •í™•, ë¯¸ì„¸í•œ ì˜¤ì°¨ë§Œ ì¡´ì¬
     * 0.6-0.7: ëŒ€ì²´ë¡œ ì •í™•í•˜ë‚˜ ì¼ë¶€ ì˜¤ë¥˜ ì¡´ì¬
     * 0.4-0.5: ì ˆë°˜ ì •ë„ë§Œ ì •í™•, ì¤‘ìš”í•œ ì˜¤ë¥˜ í¬í•¨
     * 0.0-0.3: ëŒ€ë¶€ë¶„ ë¶€ì •í™•í•˜ê±°ë‚˜ ì™„ì „íˆ ì˜ëª»ë¨

2. ğŸ¯ Answer Relevance (ë‹µë³€ ê´€ë ¨ì„±) - ê°€ì¤‘ì¹˜: 30%
   - ì •ì˜: ë‹µë³€ì´ ì§ˆë¬¸ì— ì–¼ë§ˆë‚˜ ì§ì ‘ì ìœ¼ë¡œ ëŒ€ë‹µí•˜ëŠ”ê°€?
   - í‰ê°€ ìš”ì†Œ:
     * ì§ì ‘ ëŒ€ë‹µ: ì§ˆë¬¸ì—ì„œ ìš”êµ¬í•œ ì •ë³´ë¥¼ ëª…í™•íˆ ì œê³µ
     * êµ¬ì²´ì„±: ì¶”ìƒì ì´ì§€ ì•Šê³  êµ¬ì²´ì ì¸ ì •ë³´ í¬í•¨
     * ì™„ì„±ë„: ì§ˆë¬¸ì˜ ëª¨ë“  ë¶€ë¶„ì— ëŒ€í•œ ë‹µë³€ í¬í•¨
   - ì ìˆ˜ ê¸°ì¤€:
     * 1.0: ì§ˆë¬¸ì— ì™„ë²½í•˜ê²Œ ëŒ€ë‹µ, ì¶”ê°€ ìœ ìš© ì •ë³´ í¬í•¨
     * 0.8-0.9: ì§ˆë¬¸ì— ì§ì ‘ ëŒ€ë‹µ, í•„ìš”í•œ ì •ë³´ ëª¨ë‘ í¬í•¨
     * 0.6-0.7: ëŒ€ì²´ë¡œ ê´€ë ¨ëœ ë‹µë³€ì´ë‚˜ ì¼ë¶€ ì •ë³´ ëˆ„ë½
     * 0.4-0.5: ë¶€ë¶„ì ìœ¼ë¡œë§Œ ê´€ë ¨, ì¤‘ìš” ì •ë³´ ëˆ„ë½
     * 0.0-0.3: ì§ˆë¬¸ê³¼ ë¬´ê´€í•˜ê±°ë‚˜ ì˜ë¯¸ ì—†ëŠ” ë‹µë³€

3. ğŸ‡°ğŸ‡· Korean Language Compliance (í•œêµ­ì–´ ì¤€ìˆ˜) - ê°€ì¤‘ì¹˜: 15%
   - ì •ì˜: í•œêµ­ì–´ë§Œ ì‚¬ìš©í•˜ê³  ë‹¤ë¥¸ ì–¸ì–´ í˜¼ìš©ì„ í”¼í–ˆëŠ”ê°€?
   - í‰ê°€ ìš”ì†Œ:
     * í•œêµ­ì–´ ì „ìš©: ì¤‘êµ­ì–´, ì˜ì–´ ë“± ë‹¤ë¥¸ ì–¸ì–´ ì‚¬ìš© ê¸ˆì§€
     * ìì—°ìŠ¤ëŸ¬ìš´ í•œêµ­ì–´: ì–´ìƒ‰í•˜ì§€ ì•Šì€ ë¬¸ì¥ êµ¬ì¡°
     * ì ì ˆí•œ ì¡´ëŒ“ë§: í•™ìƒ ìƒë‹´ì— ì í•©í•œ ì •ì¤‘í•œ ì¡´ëŒ“ë§
   - ì ìˆ˜ ê¸°ì¤€:
     * 1.0: ì™„ë²½í•œ í•œêµ­ì–´, ìì—°ìŠ¤ëŸ¬ìš´ ì¡´ëŒ“ë§
     * 0.8-0.9: í•œêµ­ì–´ ì „ìš©, ì•½ê°„ì˜ ì–´ìƒ‰í•¨
     * 0.6-0.7: í•œêµ­ì–´ ìœ„ì£¼, ì™¸ë˜ì–´ ê³¼ë‹¤ ì‚¬ìš©
     * 0.0-0.3: ì¤‘êµ­ì–´/ì˜ì–´ í˜¼ìš© (ì‹¬ê°í•œ ì˜¤ë¥˜)

4. ğŸ“ Student Helpfulness (í•™ìƒ ë„ì›€ë„) - ê°€ì¤‘ì¹˜: 15%
   - ì •ì˜: ì‹¤ì œ í•™ì‚¬ ìƒë‹´ì—ì„œ í•™ìƒì—ê²Œ ì–¼ë§ˆë‚˜ ë„ì›€ì´ ë˜ëŠ”ê°€?
   - í‰ê°€ ìš”ì†Œ:
     * ì‹¤ìš©ì„±: ì‹¤ì œ í•™ì—… ê³„íšì— í™œìš© ê°€ëŠ¥í•œ ì •ë³´
     * ì¡°ì–¸ í’ˆì§ˆ: ê±´ì„¤ì ì´ê³  ì‹¤í˜„ ê°€ëŠ¥í•œ ì¡°ì–¸
     * ê³µê°ê³¼ ê²©ë ¤: í•™ìƒì˜ ìƒí™©ì„ ì´í•´í•˜ê³  ê²©ë ¤í•˜ëŠ” í†¤
   - ì ìˆ˜ ê¸°ì¤€:
     * 1.0: ë§¤ìš° ìœ ìš©í•˜ê³  ì‹¤ìš©ì , ì ì ˆí•œ ê²©ë ¤ í¬í•¨
     * 0.8-0.9: ìœ ìš©í•œ ì •ë³´ì™€ ì¡°ì–¸ ì œê³µ
     * 0.6-0.7: ì¼ë°˜ì ì¸ ì •ë³´, ì œí•œëœ ë„ì›€
     * 0.4-0.5: í˜•ì‹ì ì¸ ë‹µë³€, ì‹¤ì§ˆì  ë„ì›€ ë¶€ì¡±
     * 0.0-0.3: ë„ì›€ì´ ë˜ì§€ ì•Šê±°ë‚˜ ì˜¤íˆë ¤ í˜¼ë€ ì•¼ê¸°

âš ï¸ ì¹˜ëª…ì  ì˜¤ë¥˜ (ì¦‰ì‹œ 0ì  ì²˜ë¦¬):
- ì¤‘êµ­ì–´ ì‚¬ìš© (ä¸­æ–‡ä½¿ç”¨)
- ì˜ì–´ ë¬¸ì¥ ì‚¬ìš© (English sentences)
- ê°œì¸ì •ë³´ ìœ ì¶œ (í•™ë²ˆ, ì´ë¦„ ë“± ë¯¼ê°ì •ë³´ ë…¸ì¶œ)
- ë‹¤ë¥¸ í•™ìƒ ì •ë³´ ì–¸ê¸‰
- í•™ì‚¬ ê·œì • ê´€ë ¨ ì‹¬ê°í•œ ì˜¤ë¥˜ (ì¡¸ì—… ë¶ˆê°€ëŠ¥í•œ ì¡°ì–¸ ë“±)

ğŸ’¡ ì¶”ê°€ í‰ê°€ ê´€ì :
- Processing Time: ì‘ë‹µ ìƒì„± ì‹œê°„ (3ì´ˆ ì´í•˜ ê¶Œì¥)
- Safety: ê°œì¸ì •ë³´ ë³´í˜¸ ë° ì ì ˆì„±
- Consistency: ìœ ì‚¬í•œ ì§ˆë¬¸ì— ëŒ€í•œ ì¼ê´€ëœ ë‹µë³€
- Error Handling: ì˜ëª»ëœ ì§ˆë¬¸ì— ëŒ€í•œ ì ì ˆí•œ ì²˜ë¦¬

=============================================================================
                           í•œêµ­ ëŒ€í•™ ë§¥ë½ ìƒì„¸ ì •ë³´                        
=============================================================================

ğŸ“š í•™ì  ë° ì„±ì  ì‹œìŠ¤í…œ:
- A+ (4.5ì ): 95ì  ì´ìƒ, ìµœìš°ìˆ˜ ì„±ì 
- A (4.0ì ): 90-94ì , ìš°ìˆ˜ ì„±ì   
- B+ (3.5ì ): 85-89ì , ì–‘í˜¸í•œ ì„±ì 
- B (3.0ì ): 80-84ì , ë³´í†µ ì„±ì 
- C+ (2.5ì ): 75-79ì , ë‹¤ì†Œ ë¯¸í¡
- C (2.0ì ): 70-74ì , ë¯¸í¡í•œ ì„±ì 
- D+ (1.5ì ): 65-69ì , ë§¤ìš° ë¯¸í¡
- D (1.0ì ): 60-64ì , ìµœì € í•©ê²©
- F (0.0ì ): 60ì  ë¯¸ë§Œ, ë¶ˆí•©ê²©
- P (Pass): í•©ê²© (í‰ì  ë¯¸ë°˜ì˜)
- NP (Non Pass): ë¶ˆí•©ê²© (í‰ì  ë¯¸ë°˜ì˜)

ğŸ“ ì¡¸ì—…ìš”ê±´ ìƒì„¸:
- ì´ ì´ìˆ˜í•™ì : 130í•™ì  ì´ìƒ
- ì „ê³µ í•™ì : 65í•™ì  ì´ìƒ (ì „ê³µí•„ìˆ˜ + ì „ê³µì„ íƒ)
- êµì–‘ í•™ì : 59í•™ì  (êµì–‘í•„ìˆ˜ 42í•™ì  + êµì–‘ì„ íƒ 17í•™ì )
- í‰ì í‰ê· : 2.0 ì´ìƒ (4.5 ë§Œì  ê¸°ì¤€)
- ìµœì†Œ ë“±ë¡í•™ê¸°: 8í•™ê¸°
- ì¢…í•©ì„¤ê³„: í•„ìˆ˜ ì´ìˆ˜ (ìº¡ìŠ¤í†¤ ë””ìì¸)
- ì˜ì–´ ì¸ì¦: TOEIC 700ì  ì´ìƒ ë˜ëŠ” ë™ë“± ìê²©

ğŸ“… í•™ê¸° ì²´ê³„:
- ì •ê·œí•™ê¸°: 1í•™ê¸°(3-6ì›”), 2í•™ê¸°(9-12ì›”)
- ê³„ì ˆí•™ê¸°: ì—¬ë¦„í•™ê¸°(7-8ì›”), ê²¨ìš¸í•™ê¸°(1-2ì›”)
- í•™ê¸° í‘œê¸°: "YYYYë…„ë„ Ní•™ê¸°" (ì˜ˆ: "2019ë…„ë„ 1í•™ê¸°")

=============================================================================
                          ì¢‹ì€ ë‹µë³€ vs ë‚˜ìœ ë‹µë³€ ì˜ˆì‹œ                      
=============================================================================

âœ… ì¢‹ì€ ë‹µë³€ ì˜ˆì‹œ:

[ì§ˆë¬¸] "2019ë…„ë„ 1í•™ê¸° í‰ì ì€ ì–¼ë§ˆì¸ê°€ìš”?"
[ì¢‹ì€ ë‹µë³€] 
"2019ë…„ë„ 1í•™ê¸° í‰ì ì€ 3.2ì ì…ë‹ˆë‹¤. í•´ë‹¹ í•™ê¸°ì—ëŠ” ì´ 18í•™ì ì„ ì´ìˆ˜í•˜ì…¨ìœ¼ë©°, 
ì „ê³µí•„ìˆ˜ 3ê³¼ëª©ê³¼ êµì–‘í•„ìˆ˜ 2ê³¼ëª©ì„ í¬í•¨í•˜ì—¬ 5ê°œ ê³¼ëª©ì„ ìˆ˜ê°•í•˜ì…¨ìŠµë‹ˆë‹¤. 
ì „ì²´ í‰ì í‰ê·  2.7ì ê³¼ ë¹„êµí–ˆì„ ë•Œ ìƒë‹¹íˆ ì¢‹ì€ ì„±ì ì„ ê±°ë‘ì‹  í•™ê¸°ì˜€ìŠµë‹ˆë‹¤."

[ì§ˆë¬¸] "ì¡¸ì—… ìš”ê±´ì„ ì¶©ì¡±í–ˆë‚˜ìš”?"
[ì¢‹ì€ ë‹µë³€]
"í˜„ì¬ ì´ 130í•™ì ì„ ì´ìˆ˜í•˜ì—¬ ì¡¸ì—…ìš”ê±´ 130í•™ì ì„ ì¶©ì¡±í•˜ì…¨ìŠµë‹ˆë‹¤. ì „ê³µí•™ì ì€ 
71í•™ì ìœ¼ë¡œ ìš”êµ¬ì‚¬í•­ 65í•™ì ì„ ì´ˆê³¼í•˜ì˜€ê³ , êµì–‘í•™ì ë„ 59í•™ì ìœ¼ë¡œ ì¶©ì¡±í•˜ì…¨ìŠµë‹ˆë‹¤. 
ë‹¤ë§Œ ì˜ì–´ ì¸ì¦ì´ ì•„ì§ ì™„ë£Œë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ, TOEIC 700ì  ì´ìƒ ì·¨ë“ ë˜ëŠ” 
ë™ë“±í•œ ì˜ì–´ ëŠ¥ë ¥ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤."

âŒ ë‚˜ìœ ë‹µë³€ ì˜ˆì‹œ:

[ë‚˜ìœ ë‹µë³€ 1 - ì–¸ì–´ ìœ„ë°˜]
"Sorry, I cannot find the semester information. í•´ë‹¹ í•™ê¸° ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì–´ìš”. 
ä¸­æ–‡ä¹Ÿä¸æ”¯æŒæŸ¥è¯¢ã€‚"

[ë‚˜ìœ ë‹µë³€ 2 - ì •í™•ì„± ë¶€ì¡±]
"2019ë…„ë„ 1í•™ê¸° í‰ì ì€ ëŒ€ëµ 3ì  ì •ë„ì¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ì •í™•í•œ ìˆ˜ì¹˜ëŠ” ì•Œ ìˆ˜ ì—†ì§€ë§Œ 
ë‚˜ì˜ì§€ ì•Šì€ ì„±ì ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤."

[ë‚˜ìœ ë‹µë³€ 3 - ê´€ë ¨ì„± ë¶€ì¡±]
"í‰ì ì— ëŒ€í•´ ì§ˆë¬¸í•˜ì…¨ëŠ”ë°, ì¼ë°˜ì ìœ¼ë¡œ ëŒ€í•™êµ í‰ì ì€ 4.5 ë§Œì ì…ë‹ˆë‹¤. 
A+ê°€ 4.5ì ì´ê³  Fê°€ 0ì ì…ë‹ˆë‹¤."

[ë‚˜ìœ ë‹µë³€ 4 - ê°œì¸ì •ë³´ ìœ ì¶œ]
"í•™ë²ˆ 12190002ë²ˆ ê¹€ì² ìˆ˜ í•™ìƒì˜ 2019ë…„ë„ 1í•™ê¸° í‰ì ì€ 3.2ì ì…ë‹ˆë‹¤."

=============================================================================
"""
        return context
    
    def get_enhanced_test_questions(self) -> List[Dict[str, str]]:
        """í™•ì¥ëœ í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ ëª©ë¡ ìƒì„±"""
        all_questions = []
        
        for category, questions in ENHANCED_TEST_QUESTIONS.items():
            for question in questions:
                all_questions.append({
                    "category": category,
                    "question": question,
                    "complexity": self._get_complexity_level(category)
                })
        
        return all_questions
    
    def _get_complexity_level(self, category: str) -> str:
        """ì¹´í…Œê³ ë¦¬ë³„ ë³µì¡ë„ ë ˆë²¨ ë°˜í™˜"""
        complexity_map = {
            "level_1_basic_enhanced": "ê¸°ë³¸",
            "level_2_semester_enhanced": "ì¤‘ê¸‰", 
            "level_3_comparison_enhanced": "ê³ ê¸‰",
            "level_4_analysis_enhanced": "ì „ë¬¸ê°€",
            "level_5_planning_enhanced": "ë§ˆìŠ¤í„°",
            "general_enhanced": "ì¼ë°˜",
            "edge_cases": "ê²½ê³„ì‚¬ë¡€"
        }
        return complexity_map.get(category, "ë¯¸ë¶„ë¥˜")
    
    def run_comprehensive_evaluation(self, service, max_questions_per_category: int = 5):
        """í¬ê´„ì  í‰ê°€ ì‹¤í–‰"""
        print("ğŸš€ Claude í‰ê°€ìš© í¬ê´„ì  í…ŒìŠ¤íŠ¸ ì‹œì‘...")
        print(f"ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ ìµœëŒ€ {max_questions_per_category}ê°œ ì§ˆë¬¸ ì‹¤í–‰")
        
        # ì‹œìŠ¤í…œ ì •ë³´ ìˆ˜ì§‘
        system_info = self._collect_system_info(service)
        
        # í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ ì„ ë³„
        test_questions = self._select_test_questions(max_questions_per_category)
        
        print(f"ğŸ“ ì´ {len(test_questions)}ê°œ ì§ˆë¬¸ìœ¼ë¡œ í‰ê°€ ì§„í–‰")
        
        # í‰ê°€ ì‹¤í–‰
        results = []
        total_start_time = time.time()
        
        for i, question_data in enumerate(test_questions, 1):
            print(f"\n[{i}/{len(test_questions)}] {question_data['category']} - {question_data['complexity']}")
            print(f"ì§ˆë¬¸: {question_data['question'][:50]}...")
            
            result = self._execute_single_test(service, question_data)
            results.append(result)
            
            if i % 10 == 0:
                print(f"âœ… {i}ê°œ ì§ˆë¬¸ ì™„ë£Œ")
        
        total_time = time.time() - total_start_time
        
        # ê²°ê³¼ ì¶œë ¥
        output_content = self._generate_claude_evaluation_output(
            system_info, test_questions, results, total_time
        )
        
        # íŒŒì¼ ì €ì¥
        with open(self.output_file, 'w', encoding='utf-8') as f:
            f.write(output_content)
        
        print(f"\nğŸ‰ í‰ê°€ ì™„ë£Œ!")
        print(f"ğŸ“ ê²°ê³¼ íŒŒì¼: {self.output_file}")
        print(f"â±ï¸ ì´ ì†Œìš”ì‹œê°„: {total_time:.1f}ì´ˆ")
        print(f"ğŸ“Š í‰ê°€ ì§ˆë¬¸ ìˆ˜: {len(results)}ê°œ")
        
        return self.output_file
    
    def _collect_system_info(self, service) -> Dict[str, Any]:
        """ì‹œìŠ¤í…œ ì •ë³´ ìˆ˜ì§‘"""
        try:
            status = service.get_system_status()
            model_info = service.model_service.get_model_info() if service.model_service else {}
            
            return {
                "system_status": status,
                "model_info": model_info,
                "transcript_available": service.transcript_data is not None,
                "analysis_available": service.analysis_result is not None,
                "timestamp": datetime.now().isoformat()
            }
        except Exception as e:
            return {
                "error": f"ì‹œìŠ¤í…œ ì •ë³´ ìˆ˜ì§‘ ì‹¤íŒ¨: {str(e)}",
                "timestamp": datetime.now().isoformat()
            }
    
    def _select_test_questions(self, max_per_category: int) -> List[Dict[str, str]]:
        """ì¹´í…Œê³ ë¦¬ë³„ í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ ì„ ë³„"""
        selected = []
        
        for category, questions in ENHANCED_TEST_QUESTIONS.items():
            # ê° ì¹´í…Œê³ ë¦¬ì—ì„œ ì§€ì •ëœ ìˆ˜ë§Œí¼ ì„ ë³„
            category_questions = questions[:max_per_category]
            
            for question in category_questions:
                selected.append({
                    "category": category,
                    "question": question,
                    "complexity": self._get_complexity_level(category)
                })
        
        return selected
    
    def _execute_single_test(self, service, question_data: Dict[str, str]) -> Dict[str, Any]:
        """ë‹¨ì¼ í…ŒìŠ¤íŠ¸ ì‹¤í–‰"""
        start_time = time.time()
        
        try:
            # ì§ˆë¬¸ ì‹¤í–‰
            response = service.ask_question(question_data["question"])
            processing_time = time.time() - start_time
            
            # ê¸°ë³¸ ë¶„ì„
            basic_analysis = self._analyze_response(question_data["question"], response)
            
            result = {
                "category": question_data["category"],
                "complexity": question_data["complexity"],
                "question": question_data["question"],
                "response": response,
                "processing_time": processing_time,
                "response_length": len(response),
                "analysis": basic_analysis,
                "timestamp": datetime.now().isoformat(),
                "status": "success"
            }
            
        except Exception as e:
            processing_time = time.time() - start_time
            result = {
                "category": question_data["category"],
                "complexity": question_data["complexity"],
                "question": question_data["question"],
                "response": f"ERROR: {str(e)}",
                "processing_time": processing_time,
                "response_length": 0,
                "analysis": {"error": True, "error_message": str(e)},
                "timestamp": datetime.now().isoformat(),
                "status": "error"
            }
        
        return result
    
    def _analyze_response(self, question: str, response: str) -> Dict[str, Any]:
        """ì‘ë‹µ ê¸°ë³¸ ë¶„ì„"""
        import re
        
        analysis = {
            "has_korean": bool(re.search(r'[ê°€-í£]', response)),
            "has_chinese": bool(re.search(r'[\u4e00-\u9fff]', response)),
            "has_english_sentences": bool(re.search(r'\b[A-Za-z]+\s+[A-Za-z]+\b', response)),
            "has_numbers": bool(re.search(r'\d+\.?\d*', response)),
            "has_semester_info": bool(re.search(r'\d{4}ë…„?\s*\dí•™ê¸°', response)),
            "has_course_codes": bool(re.search(r'[A-Z]{3}\d{4}', response)),
            "word_count": len(response.split()),
            "char_count": len(response),
            "politeness_indicators": len(re.findall(r'ìŠµë‹ˆë‹¤|ì„¸ìš”|ì‹­ë‹ˆë‹¤', response)),
            "question_keywords_in_answer": self._count_keyword_overlap(question, response)
        }
        
        # í’ˆì§ˆ í”Œë˜ê·¸
        quality_flags = []
        if analysis["has_chinese"]:
            quality_flags.append("CHINESE_DETECTED")
        if analysis["has_english_sentences"]:
            quality_flags.append("ENGLISH_SENTENCES")
        if analysis["word_count"] < 10:
            quality_flags.append("TOO_SHORT")
        if analysis["word_count"] > 500:
            quality_flags.append("TOO_LONG")
        if not analysis["has_korean"]:
            quality_flags.append("NO_KOREAN")
        if "ì˜¤ë¥˜" in response or "ERROR" in response:
            quality_flags.append("ERROR_RESPONSE")
        if analysis["politeness_indicators"] == 0:
            quality_flags.append("INFORMAL_TONE")
        
        analysis["quality_flags"] = quality_flags
        analysis["estimated_quality"] = self._estimate_quality_score(analysis)
        
        return analysis
    
    def _count_keyword_overlap(self, question: str, response: str) -> int:
        """ì§ˆë¬¸ê³¼ ë‹µë³€ì˜ í‚¤ì›Œë“œ ê²¹ì¹¨ ìˆ˜ ê³„ì‚°"""
        import re
        
        # í•œêµ­ì–´ í‚¤ì›Œë“œ ì¶”ì¶œ
        question_keywords = set(re.findall(r'[ê°€-í£]{2,}', question))
        response_keywords = set(re.findall(r'[ê°€-í£]{2,}', response))
        
        return len(question_keywords & response_keywords)
    
    def _estimate_quality_score(self, analysis: Dict[str, Any]) -> float:
        """ë¶„ì„ ê²°ê³¼ ê¸°ë°˜ í’ˆì§ˆ ì ìˆ˜ ì¶”ì •"""
        score = 1.0
        
        # ì¹˜ëª…ì  ì˜¤ë¥˜
        if analysis["has_chinese"]:
            score = 0.0
        elif analysis["has_english_sentences"]:
            score = 0.2
        elif not analysis["has_korean"]:
            score = 0.1
        else:
            # í’ˆì§ˆ ì ìˆ˜ ê³„ì‚°
            if analysis["word_count"] < 10:
                score -= 0.3
            elif analysis["word_count"] > 500:
                score -= 0.2
            
            if analysis["politeness_indicators"] == 0:
                score -= 0.2
            
            if analysis["question_keywords_in_answer"] == 0:
                score -= 0.3
            
            # ê¸ì •ì  ìš”ì†Œ
            if analysis["has_numbers"] and ("í•™ì " in analysis or "í‰ì " in analysis):
                score += 0.1
            
            if analysis["has_semester_info"]:
                score += 0.1
        
        return max(0.0, min(1.0, score))
    
    def _generate_claude_evaluation_output(self, system_info: Dict, test_questions: List[Dict], 
                                         results: List[Dict], total_time: float) -> str:
        """Claude í‰ê°€ìš© ìµœì¢… ì¶œë ¥ ìƒì„±"""
        
        output = self.generate_system_context_info()
        
        output += f"""
=============================================================================
                              í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì •ë³´                              
=============================================================================

ğŸ• ì‹¤í–‰ ì‹œê°„: {datetime.now().strftime("%Yë…„ %mì›” %dì¼ %Hì‹œ %Më¶„ %Sì´ˆ")}
â±ï¸ ì´ ì†Œìš”ì‹œê°„: {total_time:.1f}ì´ˆ
ğŸ“Š ì´ ì§ˆë¬¸ ìˆ˜: {len(results)}ê°œ
ğŸ–¥ï¸ ì‹œìŠ¤í…œ ìƒíƒœ: {system_info.get('system_status', {}).get('model_loaded', 'Unknown')}

ğŸ“ˆ ì¹´í…Œê³ ë¦¬ë³„ ì§ˆë¬¸ ë¶„í¬:"""
        
        # ì¹´í…Œê³ ë¦¬ë³„ í†µê³„
        category_stats = {}
        for result in results:
            category = result["category"]
            category_stats[category] = category_stats.get(category, 0) + 1
        
        for category, count in category_stats.items():
            complexity = self._get_complexity_level(category)
            output += f"\n- {category} ({complexity}): {count}ê°œ"
        
        output += f"""

=============================================================================
                              ì§ˆë¬¸ë³„ ìƒì„¸ ê²°ê³¼                              
=============================================================================

ğŸ’¡ í‰ê°€ ìš”ì²­:
ë‹¤ìŒ {len(results)}ê°œì˜ ì§ˆë¬¸-ë‹µë³€ ê²°ê³¼ë¥¼ RAGAS ë°©ë²•ë¡ ì— ë”°ë¼ í‰ê°€í•´ì£¼ì„¸ìš”.
ê° ì§ˆë¬¸ë³„ë¡œ ë‹¤ìŒ ì ìˆ˜ë¥¼ 0-1 ì‚¬ì´ë¡œ ì œê³µí•´ì£¼ì„¸ìš”:

1. Faithfulness (ì¶©ì‹¤ì„±): ë‹µë³€ì´ ì„±ì í‘œ ë°ì´í„°ì— ì–¼ë§ˆë‚˜ ì •í™•í•œê°€?
2. Answer Relevance (ë‹µë³€ ê´€ë ¨ì„±): ì§ˆë¬¸ì— ì–¼ë§ˆë‚˜ ì§ì ‘ì ìœ¼ë¡œ ë‹µí•˜ëŠ”ê°€?
3. Korean Compliance (í•œêµ­ì–´ ì¤€ìˆ˜): í•œêµ­ì–´ë§Œ ì‚¬ìš©í–ˆëŠ”ê°€?
4. Student Helpfulness (í•™ìƒ ë„ì›€ë„): ì‹¤ì œ í•™ì‚¬ ìƒë‹´ì— ë„ì›€ì´ ë˜ëŠ”ê°€?

âš ï¸ íŠ¹ë³„ ì£¼ì˜ì‚¬í•­:
- ì¤‘êµ­ì–´/ì˜ì–´ ì‚¬ìš© ì‹œ í•´ë‹¹ í•­ëª© 0ì  ì²˜ë¦¬
- ê°œì¸ì •ë³´ ìœ ì¶œ ì‹œ ì¦‰ì‹œ ë¬¸ì œ ì œê¸°
- í•™ì‚¬ ê·œì • ê´€ë ¨ ì˜¤ë¥˜ ì‹œ ì‹¬ê°ì„± ì§€ì 

"""
        
        # ê° ì§ˆë¬¸ë³„ ìƒì„¸ ê²°ê³¼
        for i, result in enumerate(results, 1):
            status_emoji = "âœ…" if result["status"] == "success" else "âŒ"
            
            output += f"""
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì§ˆë¬¸ #{i} {status_emoji} [{result['category']}] - {result['complexity']} ë‚œì´ë„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ ì§ˆë¬¸: {result['question']}

ğŸ¤– AI ë‹µë³€:
{result['response']}

ğŸ“Š ì‘ë‹µ ë©”íƒ€ë°ì´í„°:
- ì²˜ë¦¬ ì‹œê°„: {result['processing_time']:.2f}ì´ˆ
- ë‹µë³€ ê¸¸ì´: {result['response_length']}ì ({result['analysis']['word_count']}ë‹¨ì–´)
- ì‹¤í–‰ ì‹œê°„: {result['timestamp']}

ğŸ” ìë™ ë¶„ì„ ê²°ê³¼:
- í•œêµ­ì–´ í¬í•¨: {'ì˜ˆ' if result['analysis']['has_korean'] else 'ì•„ë‹ˆì˜¤'}
- ì¤‘êµ­ì–´ ê°ì§€: {'ì˜ˆ âš ï¸' if result['analysis']['has_chinese'] else 'ì•„ë‹ˆì˜¤'}
- ì˜ì–´ ë¬¸ì¥: {'ì˜ˆ âš ï¸' if result['analysis']['has_english_sentences'] else 'ì•„ë‹ˆì˜¤'}
- ìˆ«ì ì •ë³´: {'í¬í•¨' if result['analysis']['has_numbers'] else 'ì—†ìŒ'}
- í•™ê¸° ì •ë³´: {'í¬í•¨' if result['analysis']['has_semester_info'] else 'ì—†ìŒ'}
- ì¡´ëŒ“ë§ ì‚¬ìš©: {result['analysis']['politeness_indicators']}íšŒ
- í’ˆì§ˆ í”Œë˜ê·¸: {', '.join(result['analysis']['quality_flags']) if result['analysis']['quality_flags'] else 'ì •ìƒ'}
- ì¶”ì • í’ˆì§ˆì ìˆ˜: {result['analysis']['estimated_quality']:.2f}/1.0

ğŸ’­ Claude í‰ê°€ ìš”ì²­:
ì´ ì§ˆë¬¸-ë‹µë³€ì— ëŒ€í•´ ë‹¤ìŒ 4ê°œ ì§€í‘œë¡œ í‰ê°€í•´ì£¼ì„¸ìš”:
â€¢ Faithfulness: ___/1.0 (ì„±ì í‘œ ë°ì´í„° ì •í™•ì„±)
â€¢ Answer Relevance: ___/1.0 (ì§ˆë¬¸ ê´€ë ¨ì„±)  
â€¢ Korean Compliance: ___/1.0 (í•œêµ­ì–´ ì¤€ìˆ˜)
â€¢ Student Helpfulness: ___/1.0 (í•™ìƒ ë„ì›€ë„)
â€¢ ì¢…í•© í‰ê°€ ë° ê°œì„ ì‚¬í•­: ___

"""
        
        output += f"""
=============================================================================
                              ì „ì²´ ì‹œìŠ¤í…œ í‰ê°€ ìš”ì²­                          
=============================================================================

ğŸ“‹ ì¢…í•© í‰ê°€ ìš”ì²­:

1. ğŸ“Š ì „ì²´ ì„±ëŠ¥ ë¶„ì„:
   - í‰ê·  Faithfulness ì ìˆ˜ ë° ì£¼ìš” ë¬¸ì œì 
   - í‰ê·  Answer Relevance ì ìˆ˜ ë° ê°œì„  ë°©í–¥
   - Korean Compliance ì¤€ìˆ˜ìœ¨ ë° ì–¸ì–´ ì˜¤ë¥˜ íŒ¨í„´
   - Student Helpfulness ìˆ˜ì¤€ ë° ìƒë‹´ í’ˆì§ˆ

2. ğŸ¯ ì¹´í…Œê³ ë¦¬ë³„ ê°•ì•½ì :
   - ê¸°ë³¸ ì§ˆë¬¸ (level_1): ì„±ëŠ¥ ë° íŠ¹ì´ì‚¬í•­
   - í•™ê¸°ë³„ ë¶„ì„ (level_2): ì •í™•ì„± ë° ì™„ì„±ë„  
   - ë¹„êµ ë¶„ì„ (level_3): ë…¼ë¦¬ì„± ë° ì¼ê´€ì„±
   - ë³µí•© ë¶„ì„ (level_4): ì „ë¬¸ì„± ë° ì •í™•ì„±
   - ê³„íš ìˆ˜ë¦½ (level_5): ì‹¤ìš©ì„± ë° ì¡°ì–¸ í’ˆì§ˆ
   - ì¼ë°˜ ì§ˆë¬¸: ë„ë©”ì¸ ì§€ì‹ ë° ì„¤ëª… ëŠ¥ë ¥
   - ê²½ê³„ ì‚¬ë¡€: ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì•ˆì „ì„±

3. ğŸš¨ ì£¼ìš” ë¬¸ì œì  ë° ìœ„í—˜ ìš”ì†Œ:
   - ì–¸ì–´ ê·œì¹™ ìœ„ë°˜ ì‚¬ë¡€
   - ì •ë³´ ì •í™•ì„± ë¬¸ì œ
   - ê°œì¸ì •ë³´ ë³´í˜¸ ì´ìŠˆ
   - í•™ì‚¬ ìƒë‹´ ë¶€ì ì ˆì„±

4. ğŸ’¡ êµ¬ì²´ì  ê°œì„  ë°©ì•ˆ:
   - ì¦‰ì‹œ ìˆ˜ì • í•„ìš” ì‚¬í•­ (Critical)
   - ë‹¨ê¸° ê°œì„  ê³¼ì œ (High Priority)  
   - ì¤‘ì¥ê¸° ë°œì „ ë°©í–¥ (Medium Priority)
   - ì‹œìŠ¤í…œ ìµœì í™” ì œì•ˆ

5. ğŸ† ìµœì¢… ë“±ê¸‰ ë° ë°°í¬ ê¶Œì¥ì‚¬í•­:
   - ì „ì²´ ì‹œìŠ¤í…œ ì ìˆ˜ (A, B, C, D, F)
   - ì‹¤ì œ í•™ìƒ ì„œë¹„ìŠ¤ ì ìš© ê°€ëŠ¥ì„±
   - ì¶”ê°€ í…ŒìŠ¤íŠ¸ í•„ìš” ì˜ì—­
   - ë°°í¬ ì „ í•„ìˆ˜ ìˆ˜ì •ì‚¬í•­

ğŸ“ˆ ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ:
- RAGAS í‘œì¤€ ì ìˆ˜ì™€ ë¹„êµ ë¶„ì„
- ìƒìš© í•™ì‚¬ ìƒë‹´ ì‹œìŠ¤í…œ ëŒ€ë¹„ ìˆ˜ì¤€
- í•™ìˆ  ë…¼ë¬¸ ê¸°ì¤€ RAG ì„±ëŠ¥ í‰ê°€

ğŸ¯ ìµœì¢… í‰ê°€ ë° ê¶Œì¥ì‚¬í•­ì„ ìƒì„¸íˆ ì œì‹œí•´ì£¼ì„¸ìš”.

=============================================================================
                                íŒŒì¼ ë                                   
=============================================================================
ìƒì„± ì‹œê°„: {datetime.now().strftime("%Y-%m-%d %H:%M:%S")}
íŒŒì¼ëª…: {self.output_file}
ì´ ì§ˆë¬¸ ìˆ˜: {len(results)}ê°œ
ì´ ì²˜ë¦¬ ì‹œê°„: {total_time:.1f}ì´ˆ
=============================================================================
"""
        
        return output

# íŒ©í† ë¦¬ í•¨ìˆ˜ ë° ì‹¤í–‰ í•¨ìˆ˜
def run_claude_evaluation_export(service, questions_per_category: int = 4):
    """Claude í‰ê°€ìš© ê²°ê³¼ ì¶œë ¥ ì‹¤í–‰"""
    exporter = ClaudeEvaluationExporter()
    output_file = exporter.run_comprehensive_evaluation(service, questions_per_category)
    
    print(f"\nğŸ“‹ Claude í‰ê°€ ê°€ì´ë“œ:")
    print(f"1. ìƒì„±ëœ íŒŒì¼ì„ Claudeì—ê²Œ ì—…ë¡œë“œí•˜ì„¸ìš”: {output_file}")
    print(f"2. 'ì´ RAG ì‹œìŠ¤í…œì„ RAGAS ë°©ë²•ë¡ ìœ¼ë¡œ í‰ê°€í•´ì£¼ì„¸ìš”'ë¼ê³  ìš”ì²­í•˜ì„¸ìš”")
    print(f"3. ê° ì§ˆë¬¸ë³„ 4ê°œ ì§€í‘œ ì ìˆ˜ì™€ ì¢…í•© ê°œì„ ë°©ì•ˆì„ ë°›ìœ¼ì„¸ìš”")
    
    return output_file

# ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜
def main():
    """ë©”ì¸ ì‹¤í–‰"""
    print("ğŸ“ Claude í‰ê°€ìš© RAG ì‹œìŠ¤í…œ í…ŒìŠ¤íŠ¸ ì‹œì‘")
    
    # ì„œë¹„ìŠ¤ ë¡œë“œ
    try:
        from modules import create_academic_service
        print("ğŸ“š í•™ì‚¬ ìƒë‹´ ì„œë¹„ìŠ¤ ë¡œë”© ì¤‘...")
        service = create_academic_service()
        
        # í‰ê°€ ì‹¤í–‰
        print("ğŸš€ í‰ê°€ ë°ì´í„° ìƒì„± ì¤‘...")
        output_file = run_claude_evaluation_export(service, questions_per_category=4)
        
        print(f"\nğŸ‰ ì™„ë£Œ! Claude í‰ê°€ìš© íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤: {output_file}")
        
        # ì •ë¦¬
        service.cleanup()
        
    except Exception as e:
        print(f"âŒ ì˜¤ë¥˜ ë°œìƒ: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    main()